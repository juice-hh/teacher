<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 { color: #333; }
        .section {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 4px;
        }
        .data-count {
            font-size: 24px;
            font-weight: bold;
            color: #1890ff;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 14px;
            cursor: pointer;
            background: #1890ff;
            color: white;
            border: none;
            border-radius: 4px;
        }
        button:hover {
            background: #40a9ff;
        }
        button.danger {
            background: #ff4d4f;
        }
        button.danger:hover {
            background: #ff7875;
        }
        pre {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” æ•°æ®çŠ¶æ€æ£€æŸ¥</h1>

        <div class="section">
            <h3>LocalStorage æ•°æ®</h3>
            <div class="data-count">è¯„ä»·ææ–™: <span id="materialsCount">0</span> æ¡</div>
            <div class="data-count">ç§¯åˆ†æ•°æ®: <span id="scoresCount">0</span> æ¡</div>
            <div class="data-count">ç”³è¯‰è®°å½•: <span id="appealsCount">0</span> æ¡</div>
        </div>

        <div class="section">
            <h3>æ“ä½œ</h3>
            <button onclick="loadDemoData()">ğŸ“¥ åŠ è½½æ¼”ç¤ºæ•°æ®</button>
            <button onclick="clearAllData()" class="danger">ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰æ•°æ®</button>
            <button onclick="checkData()">ğŸ” æ£€æŸ¥æ•°æ®</button>
            <button onclick="goToApp()">ğŸš€ è¿›å…¥ç³»ç»Ÿ</button>
        </div>

        <div class="section">
            <h3>æ•°æ®è¯¦æƒ…</h3>
            <pre id="dataDetails">æš‚æ— æ•°æ®</pre>
        </div>

        <div id="status" class="status" style="display: none;"></div>
    </div>

    <script>
        // æ¼”ç¤ºæ•°æ®
        const demoMaterials = [
            {
                id: 1,
                taskId: 1,
                taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„',
                indicatorId: 1,
                indicatorName: 'å¤‡è¯¾å……åˆ†',
                teacherId: 'T001',
                teacherName: 'å¼ è€å¸ˆ',
                materialName: 'æ•™å­¦æ•™æ¡ˆ-æ˜¥å­£å­¦æœŸ',
                materialType: 'document',
                fileUrl: '/files/teaching-plan.pdf',
                description: 'åŒ…å«å®Œæ•´çš„æ•™å­¦æ•™æ¡ˆã€æ•™å­¦æ—¥å†å’Œè¯¾ä»¶',
                uploadTime: '2024-03-05 10:30:00',
                status: 'pending',
                approveTime: null,
                approver: null,
                rejectReason: ''
            },
            {
                id: 2,
                taskId: 1,
                taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„',
                indicatorId: 5,
                indicatorName: 'æ•™å­¦æ–¹æ³•åˆ›æ–°',
                teacherId: 'T001',
                teacherName: 'å¼ è€å¸ˆ',
                materialName: 'æ•™å­¦æ”¹é©é¡¹ç›®æˆæœ',
                materialType: 'document',
                fileUrl: '/files/teaching-reform.pdf',
                description: 'æ•™å­¦æ–¹æ³•åˆ›æ–°é¡¹ç›®çš„å®æ–½è®°å½•å’Œæˆæœ',
                uploadTime: '2024-03-06 14:20:00',
                status: 'approved',
                approveTime: '2024-03-07 09:15:00',
                approver: 'ç®¡ç†å‘˜',
                rejectReason: ''
            },
            {
                id: 3,
                taskId: 1,
                taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„',
                indicatorId: 2,
                indicatorName: 'è¯¾å ‚ç®¡ç†',
                teacherId: 'T002',
                teacherName: 'æè€å¸ˆ',
                materialName: 'è¯¾å ‚ç®¡ç†è®°å½•',
                materialType: 'document',
                fileUrl: '/files/class-management.pdf',
                description: 'æœ¬å­¦æœŸè¯¾å ‚ç®¡ç†æƒ…å†µè®°å½•',
                uploadTime: '2024-03-04 16:45:00',
                status: 'rejected',
                approveTime: '2024-03-05 11:20:00',
                approver: 'ç®¡ç†å‘˜',
                rejectReason: 'ææ–™ä¸å®Œæ•´ï¼Œç¼ºå°‘å­¦ç”Ÿåé¦ˆè®°å½•'
            },
            {
                id: 4,
                taskId: 1,
                taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„',
                indicatorId: 8,
                indicatorName: 'å­¦ç”Ÿè¯„ä»·',
                teacherId: 'T003',
                teacherName: 'ç‹è€å¸ˆ',
                materialName: 'å­¦ç”Ÿè¯„æ•™æ±‡æ€»æŠ¥å‘Š',
                materialType: 'document',
                fileUrl: '/files/student-eval.pdf',
                description: '2024å¹´æ˜¥å­£å­¦æœŸå­¦ç”Ÿè¯„æ•™ç»“æœæ±‡æ€»',
                uploadTime: '2024-03-07 09:15:00',
                status: 'pending',
                approveTime: null,
                approver: null,
                rejectReason: ''
            },
            {
                id: 5,
                taskId: 1,
                taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„',
                indicatorId: 11,
                indicatorName: 'å­¦æœ¯ç ”ç©¶',
                teacherId: 'T003',
                teacherName: 'ç‹è€å¸ˆ',
                materialName: 'ç§‘ç ”é¡¹ç›®ç»“é¢˜è¯ä¹¦',
                materialType: 'document',
                fileUrl: '/files/research-cert.pdf',
                description: '2023å¹´åº¦çœçº§ç§‘ç ”é¡¹ç›®ç»“é¢˜ææ–™',
                uploadTime: '2024-03-08 15:30:00',
                status: 'pending',
                approveTime: null,
                approver: null,
                rejectReason: ''
            }
        ]

        const demoScores = [
            {
                id: 1,
                teacherId: 'T001',
                teacherName: 'å¼ è€å¸ˆ',
                department: 'è®¡ç®—æœºå­¦é™¢',
                semester: '2024å¹´åº¦',
                totalScore: 92.5,
                confirmed: true,
                confirmedBy: null,
                confirmedAt: '2024-03-15 10:30:00',
                details: [
                    { taskId: 1, taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„', indicatorId: 1, indicatorName: 'å¤‡è¯¾å……åˆ†', score: 5, maxScore: 5 },
                    { taskId: 1, taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„', indicatorId: 5, indicatorName: 'æ•™å­¦æ–¹æ³•åˆ›æ–°', score: 7, maxScore: 8 },
                    { taskId: 1, taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„', indicatorId: 8, indicatorName: 'å­¦ç”Ÿè¯„ä»·', score: 9, maxScore: 10 },
                    { taskId: 1, taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„', indicatorId: 11, indicatorName: 'å­¦æœ¯ç ”ç©¶', score: 8.5, maxScore: 10 }
                ]
            },
            {
                id: 2,
                teacherId: 'T002',
                teacherName: 'æè€å¸ˆ',
                department: 'æ•°å­¦å­¦é™¢',
                semester: '2024å¹´åº¦',
                totalScore: 87.0,
                confirmed: true,
                confirmedBy: null,
                confirmedAt: '2024-03-16 14:20:00',
                details: [
                    { taskId: 1, taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„', indicatorId: 1, indicatorName: 'å¤‡è¯¾å……åˆ†', score: 4, maxScore: 5 },
                    { taskId: 1, taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„', indicatorId: 5, indicatorName: 'æ•™å­¦æ–¹æ³•åˆ›æ–°', score: 6, maxScore: 8 },
                    { taskId: 1, taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„', indicatorId: 8, indicatorName: 'å­¦ç”Ÿè¯„ä»·', score: 8.5, maxScore: 10 },
                    { taskId: 1, taskName: '2024å¹´åº¦æ•™å¸ˆè‡ªè¯„', indicatorId: 11, indicatorName: 'å­¦æœ¯ç ”ç©¶', score: 7.5, maxScore: 10 }
                ]
            }
        ]

        const demoAppeals = [
            {
                id: 1,
                teacherId: 'T003',
                teacherName: 'ç‹è€å¸ˆ',
                department: 'è‹±è¯­å­¦é™¢',
                scoreId: 3,
                indicatorName: 'æ•™å­¦æ–¹æ³•åˆ›æ–°',
                originalScore: 7,
                expectedScore: 8,
                reason: 'è¯¥æŒ‡æ ‡å®é™…å¾—åˆ†åº”è¯¥æ˜¯8åˆ†ï¼Œç³»ç»Ÿè®¡ç®—é”™è¯¯',
                status: 'pending',
                submitTime: '2024-03-20 10:15:00',
                handler: null,
                handleTime: null,
                handleResult: ''
            }
        ]

        function updateDisplay() {
            const materials = localStorage.getItem('evaluationMaterials')
            const scores = localStorage.getItem('evaluationScores')
            const appeals = localStorage.getItem('scoreAppeals')

            document.getElementById('materialsCount').textContent = materials ? JSON.parse(materials).length : 0
            document.getElementById('scoresCount').textContent = scores ? JSON.parse(scores).length : 0
            document.getElementById('appealsCount').textContent = appeals ? JSON.parse(appeals).length : 0
        }

        function loadDemoData() {
            localStorage.setItem('evaluationMaterials', JSON.stringify(demoMaterials))
            localStorage.setItem('evaluationScores', JSON.stringify(demoScores))
            localStorage.setItem('scoreAppeals', JSON.stringify(demoAppeals))
            updateDisplay()
            showStatus('âœ… æ¼”ç¤ºæ•°æ®å·²åŠ è½½ï¼', 'success')
        }

        function clearAllData() {
            localStorage.clear()
            updateDisplay()
            showStatus('ğŸ—‘ï¸ æ‰€æœ‰æ•°æ®å·²æ¸…é™¤ï¼', 'success')
        }

        function checkData() {
            const materials = localStorage.getItem('evaluationMaterials')
            const scores = localStorage.getItem('evaluationScores')
            const appeals = localStorage.getItem('scoreAppeals')

            const details = {
                materials: materials ? JSON.parse(materials) : [],
                scores: scores ? JSON.parse(scores) : [],
                appeals: appeals ? JSON.parse(appeals) : []
            }

            document.getElementById('dataDetails').textContent = JSON.stringify(details, null, 2)
        }

        function goToApp() {
            window.location.href = '/role-select'
        }

        function showStatus(message, type) {
            const status = document.getElementById('status')
            status.textContent = message
            status.className = 'status ' + type
            status.style.display = 'block'

            setTimeout(() => {
                status.style.display = 'none'
            }, 3000)
        }

        // åˆå§‹åŒ–æ˜¾ç¤º
        updateDisplay()
    </script>
</body>
</html>
