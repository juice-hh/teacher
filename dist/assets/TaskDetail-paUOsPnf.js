import{o as p,c as m,b as e,w as t,D as k,S as j,r,k as ne,e as se,a as d,h as n,q as s,F as N,p as w,j as x,M as T,f as V,U as re,R as ie,G as de,V as ue,O as E}from"./index-BQs85f6M.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pe={class:"task-detail"},me={class:"card-header"},_e={class:"indicators-tags"},fe={key:0,class:"empty-text"},ve={class:"card-header"},ge={class:"header-actions"},be={class:"search-bar"},ye={class:"pagination"},he={key:0},ke={class:"indicator-scores"},Ne={class:"indicator-label"},we={class:"score-text"},xe={class:"materials-list"},ze={__name:"TaskDetail",setup(Ce){ne();const F=se(),i=k({id:1,name:"2024年度教师自评",type:"self",period:"2024年度",startDate:"2024-03-01",endDate:"2024-03-31",indicators:[{id:1,name:"备课充分",score:5},{id:5,name:"教学方法创新",score:8}],participantCount:128,completedCount:96,completionRate:75,status:"进行中"}),g=j({teacherName:"",department:""}),f=j({page:1,size:10,total:0}),z=k(!1),u=k(null),D=k([{id:1,teacherName:"张老师",department:"计算机学院",scores:{1:5,5:7},totalScore:92.5,submitTime:"2024-03-15 14:30:00",materials:[{id:1,indicatorId:1,indicatorName:"备课充分",materialName:"教学教案.pdf",status:"approved"}]},{id:2,teacherName:"李老师",department:"数学学院",scores:{1:4,5:6},totalScore:87.5,submitTime:"2024-03-16 10:20:00",materials:[]},{id:3,teacherName:"王老师",department:"英语学院",scores:{1:5,5:8},totalScore:95,submitTime:"2024-03-14 16:45:00",materials:[{id:2,indicatorId:1,indicatorName:"备课充分",materialName:"教案.docx",status:"approved"},{id:3,indicatorId:5,indicatorName:"教学方法创新",materialName:"教学改革报告.pdf",status:"approved"}]}]);f.total=D.value.length;function P(o){return{self:"自我评价",peer:"同行评审",comprehensive:"综合评价"}[o]||o}function O(o){return{self:"primary",peer:"success",comprehensive:"warning"}[o]||"info"}function q(o){return{未开始:"info",进行中:"primary",已结束:"success"}[o]||"info"}function G(o){return o>=80?"success":o>=50?"warning":"danger"}function L(o){return o?o>=4?"text-success":o>=3?"text-warning":"text-danger":"text-muted"}function R(o){return o>=90?"success":o>=80?"primary":o>=60?"warning":"danger"}function B(o,l){return o?Math.round(o/l*100):0}function $(o,l){const b=B(o,l);return b>=80?"#67c23a":b>=60?"#e6a23c":"#f56c6c"}function A(o){return{pending:"warning",approved:"success",rejected:"danger"}[o]||"info"}function H(){F.back()}function J(){E.success("查询成功")}function K(){Object.assign(g,{teacherName:"",department:""})}function Q(){E.success("导出功能开发中...")}function W(o){u.value=o,z.value=!0}return(o,l)=>{const b=r("el-page-header"),_=r("el-tag"),c=r("el-descriptions-item"),U=r("el-descriptions"),I=r("el-card"),y=r("el-button"),X=r("el-input"),C=r("el-form-item"),h=r("el-option"),Y=r("el-select"),Z=r("el-form"),v=r("el-table-column"),ee=r("el-table"),te=r("el-pagination"),M=r("el-divider"),ae=r("el-progress"),le=r("el-empty"),oe=r("el-dialog");return p(),m("div",pe,[e(b,{onBack:H,class:"page-header"},{content:t(()=>[...l[5]||(l[5]=[d("span",{class:"page-title"},"任务详情",-1)])]),_:1}),e(I,{class:"info-card",shadow:"hover"},{header:t(()=>[d("div",me,[l[6]||(l[6]=d("span",{class:"card-title"},"任务基本信息",-1)),e(_,{type:q(i.value.status),size:"large"},{default:t(()=>[n(s(i.value.status),1)]),_:1},8,["type"])])]),default:t(()=>[e(U,{column:3,border:""},{default:t(()=>[e(c,{label:"任务名称"},{default:t(()=>[n(s(i.value.name),1)]),_:1}),e(c,{label:"任务类型"},{default:t(()=>[e(_,{type:O(i.value.type),size:"small"},{default:t(()=>[n(s(P(i.value.type)),1)]),_:1},8,["type"])]),_:1}),e(c,{label:"评价周期"},{default:t(()=>[n(s(i.value.period),1)]),_:1}),e(c,{label:"开始时间"},{default:t(()=>[n(s(i.value.startDate),1)]),_:1}),e(c,{label:"结束时间"},{default:t(()=>[n(s(i.value.endDate),1)]),_:1}),e(c,{label:"参与人数"},{default:t(()=>[n(s(i.value.participantCount)+" 人 ",1)]),_:1}),e(c,{label:"完成人数"},{default:t(()=>[n(s(i.value.completedCount)+" 人 ",1)]),_:1}),e(c,{label:"完成率"},{default:t(()=>[e(_,{type:G(i.value.completionRate),size:"small"},{default:t(()=>[n(s(i.value.completionRate)+"% ",1)]),_:1},8,["type"])]),_:1}),e(c,{label:"绑定指标",span:3},{default:t(()=>[d("div",_e,[(p(!0),m(N,null,w(i.value.indicators,a=>(p(),x(_,{key:a.id,type:"info",size:"small",class:"indicator-tag"},{default:t(()=>[n(s(a.name)+"（"+s(a.score)+"分） ",1)]),_:2},1024))),128)),!i.value.indicators||i.value.indicators.length===0?(p(),m("span",fe," 未绑定指标 ")):T("",!0)])]),_:1})]),_:1})]),_:1}),e(I,{class:"detail-card",shadow:"hover"},{header:t(()=>[d("div",ve,[l[8]||(l[8]=d("span",{class:"card-title"},"任务完成明细",-1)),d("div",ge,[e(y,{icon:V(ue),onClick:Q},{default:t(()=>[...l[7]||(l[7]=[n("导出数据",-1)])]),_:1},8,["icon"])])])]),default:t(()=>[d("div",be,[e(Z,{inline:!0},{default:t(()=>[e(C,{label:"教师姓名"},{default:t(()=>[e(X,{modelValue:g.teacherName,"onUpdate:modelValue":l[0]||(l[0]=a=>g.teacherName=a),placeholder:"请输入教师姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(C,{label:"部门"},{default:t(()=>[e(Y,{modelValue:g.department,"onUpdate:modelValue":l[1]||(l[1]=a=>g.department=a),placeholder:"请选择部门",clearable:""},{default:t(()=>[e(h,{label:"计算机学院",value:"计算机学院"}),e(h,{label:"数学学院",value:"数学学院"}),e(h,{label:"英语学院",value:"英语学院"}),e(h,{label:"物理学院",value:"物理学院"})]),_:1},8,["modelValue"])]),_:1}),e(C,null,{default:t(()=>[e(y,{type:"primary",icon:V(re),onClick:J},{default:t(()=>[...l[9]||(l[9]=[n("查询",-1)])]),_:1},8,["icon"]),e(y,{onClick:K},{default:t(()=>[...l[10]||(l[10]=[n("重置",-1)])]),_:1})]),_:1})]),_:1})]),e(ee,{data:D.value,style:{width:"100%"},border:""},{default:t(()=>[e(v,{type:"index",label:"序号",width:"60"}),e(v,{prop:"teacherName",label:"教师姓名",width:"120"}),e(v,{prop:"department",label:"部门",width:"150"}),(p(!0),m(N,null,w(i.value.indicators,a=>(p(),x(v,{key:a.id,label:a.name,width:"120",align:"center"},{default:t(({row:S})=>[d("span",{class:ie(L(S.scores[a.id]))},s(S.scores[a.id]||"-"),3)]),_:2},1032,["label"]))),128)),e(v,{prop:"totalScore",label:"总分",width:"100",fixed:"right"},{default:t(({row:a})=>[e(_,{type:R(a.totalScore),size:"small"},{default:t(()=>[n(s(a.totalScore),1)]),_:2},1032,["type"])]),_:1}),e(v,{label:"操作",width:"150",fixed:"right"},{default:t(({row:a})=>[e(y,{type:"primary",size:"small",link:"",icon:V(de),onClick:S=>W(a)},{default:t(()=>[...l[11]||(l[11]=[n(" 查看详情 ",-1)])]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),d("div",ye,[e(te,{"current-page":f.page,"onUpdate:currentPage":l[2]||(l[2]=a=>f.page=a),"page-size":f.size,"onUpdate:pageSize":l[3]||(l[3]=a=>f.size=a),"page-sizes":[10,20,50],total:f.total,layout:"total, sizes, prev, pager, next"},null,8,["current-page","page-size","total"])])]),_:1}),e(oe,{modelValue:z.value,"onUpdate:modelValue":l[4]||(l[4]=a=>z.value=a),title:"教师评价详情",width:"800px"},{default:t(()=>[u.value?(p(),m("div",he,[e(U,{column:2,border:"",class:"teacher-info"},{default:t(()=>[e(c,{label:"教师姓名"},{default:t(()=>[n(s(u.value.teacherName),1)]),_:1}),e(c,{label:"部门"},{default:t(()=>[n(s(u.value.department),1)]),_:1}),e(c,{label:"总分"},{default:t(()=>[e(_,{type:R(u.value.totalScore),size:"large"},{default:t(()=>[n(s(u.value.totalScore)+" 分 ",1)]),_:1},8,["type"])]),_:1}),e(c,{label:"提交时间"},{default:t(()=>[n(s(u.value.submitTime),1)]),_:1})]),_:1}),e(M,{"content-position":"left"},{default:t(()=>[...l[12]||(l[12]=[n("各项指标得分",-1)])]),_:1}),d("div",ke,[(p(!0),m(N,null,w(i.value.indicators,a=>(p(),m("div",{key:a.id,class:"indicator-score-item"},[d("div",Ne,s(a.name),1),e(ae,{percentage:B(u.value.scores[a.id],a.score),color:$(u.value.scores[a.id],a.score)},null,8,["percentage","color"]),d("div",we,s(u.value.scores[a.id]||0)+" / "+s(a.score),1)]))),128))]),e(M,{"content-position":"left"},{default:t(()=>[...l[13]||(l[13]=[n("已上传材料",-1)])]),_:1}),d("div",xe,[(p(!0),m(N,null,w(u.value.materials,a=>(p(),x(_,{key:a.id,class:"material-tag",type:A(a.status)},{default:t(()=>[n(s(a.indicatorName)+": "+s(a.materialName),1)]),_:2},1032,["type"]))),128)),!u.value.materials||u.value.materials.length===0?(p(),x(le,{key:0,description:"暂无上传材料","image-size":60})):T("",!0)])])):T("",!0)]),_:1},8,["modelValue"])])}}},Ve=ce(ze,[["__scopeId","data-v-06aaa067"]]);export{Ve as default};
