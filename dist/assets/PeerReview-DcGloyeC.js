import{o as k,c as V,b as e,w as s,r as o,D as _,a as l,f as E,v as S,q as i,h as b,F as P,p as q,M as A,S as U,O as B,N as G}from"./index-BQs85f6M.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"peer-review"},K={class:"user-cell"},Q={key:0,class:"review-content"},W={class:"teacher-info"},X={class:"info-right"},Y={class:"teacher-name"},Z={class:"teacher-dept"},ee={class:"review-items"},te={class:"item-header"},ae={class:"item-name"},le={class:"overall-comment"},se={__name:"PeerReview",setup(oe){const p=_(!1),d=_(null),v=_(!1),u=U({}),f=U({}),h=_(""),y=[{name:"教学态度",key:"attitude"},{name:"教学方法",key:"method"},{name:"教学效果",key:"effect"},{name:"育人工作",key:"education"},{name:"专业素养",key:"professional"}],R=_([{id:1,name:"李老师",department:"数学学院",title:"教授",taskName:"2024年春季同行评审",deadline:"2024-03-20",status:"未开始"},{id:2,name:"王老师",department:"英语学院",title:"副教授",taskName:"2024年春季同行评审",deadline:"2024-03-25",status:"进行中"},{id:3,name:"刘老师",department:"物理学院",title:"讲师",taskName:"2024年春季同行评审",deadline:"2024-03-15",status:"已完成"}]);function D(r){return{未开始:"info",进行中:"primary",已完成:"success"}[r]||"info"}function T(r){d.value=r,v.value=r.status==="已完成",y.forEach((t,n)=>{u[n]=v.value?8:0,f[n]=""}),h.value="",p.value=!0}function $(){if(Object.values(u).some(n=>!n||n===0)){B.warning("请完成所有项目的评分");return}const t=Object.values(u).reduce((n,w)=>n+w,0);G.confirm(`评审总分为 ${t} 分，确定要提交吗？`,"确认提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{d.value&&(d.value.status="已完成"),p.value=!1,B.success("评审提交成功")})}function z(){y.forEach((r,t)=>{u[t]=0,f[t]=""}),h.value=""}return(r,t)=>{const n=o("el-alert"),w=o("el-avatar"),c=o("el-table-column"),M=o("el-tag"),O=o("el-link"),j=o("el-table"),F=o("el-card"),C=o("el-divider"),I=o("el-rate"),x=o("el-input"),N=o("el-button"),L=o("el-dialog");return k(),V("div",J,[e(F,{class:"page-card",shadow:"hover"},{header:s(()=>[...t[3]||(t[3]=[l("div",{class:"card-header"},[l("span",{class:"card-title"},"评审他人")],-1)])]),default:s(()=>[e(n,{title:"请客观公正地对被评审人进行评价，评价结果将作为教师年度考核的重要依据",type:"warning",closable:!1,"show-icon":"",style:{"margin-bottom":"24px"}}),e(j,{data:R.value,style:{width:"100%"}},{default:s(()=>[e(c,{prop:"name",label:"被评审人",width:"120"},{default:s(({row:a})=>[l("div",K,[e(w,{size:32,icon:E(S)},null,8,["icon"]),l("span",null,i(a.name),1)])]),_:1}),e(c,{prop:"department",label:"部门",width:"150"}),e(c,{prop:"title",label:"职称",width:"100"}),e(c,{prop:"taskName",label:"评审任务"}),e(c,{prop:"deadline",label:"截止日期",width:"120"}),e(c,{prop:"status",label:"状态",width:"100"},{default:s(({row:a})=>[e(M,{type:D(a.status),size:"small"},{default:s(()=>[b(i(a.status),1)]),_:2},1032,["type"])]),_:1}),e(c,{label:"操作",width:"120",fixed:"right"},{default:s(({row:a})=>[e(O,{type:"primary",underline:!1,onClick:m=>T(a),disabled:a.status==="已完成"},{default:s(()=>[b(i(a.status==="已完成"?"查看":"开始评审"),1)]),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),e(L,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=a=>p.value=a),title:"同行评审",width:"800px",onClose:z},{footer:s(()=>[e(N,{onClick:t[1]||(t[1]=a=>p.value=!1)},{default:s(()=>[...t[6]||(t[6]=[b("取消",-1)])]),_:1}),e(N,{type:"primary",onClick:$,disabled:v.value},{default:s(()=>[b(i(v.value?"已完成":"提交评审"),1)]),_:1},8,["disabled"])]),default:s(()=>[d.value?(k(),V("div",Q,[l("div",W,[e(w,{size:60,icon:E(S)},null,8,["icon"]),l("div",X,[l("h3",Y,i(d.value.name),1),l("p",Z,i(d.value.department)+" · "+i(d.value.title),1)])]),e(C),l("div",ee,[t[4]||(t[4]=l("h4",{class:"items-title"},"请对以下方面进行评价（每项10分）",-1)),(k(),V(P,null,q(y,(a,m)=>l("div",{class:"review-item",key:m},[l("div",te,[l("span",ae,i(a.name),1),e(I,{modelValue:u[m],"onUpdate:modelValue":g=>u[m]=g,max:10,"show-score":"","score-template":"{value} 分","allow-half":""},null,8,["modelValue","onUpdate:modelValue"])]),e(x,{modelValue:f[m],"onUpdate:modelValue":g=>f[m]=g,type:"textarea",rows:2,placeholder:`请对${a.name}进行评价说明（选填）`,style:{"margin-top":"12px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),64))]),e(C),l("div",le,[t[5]||(t[5]=l("h4",null,"综合评价",-1)),e(x,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),type:"textarea",rows:4,placeholder:"请输入对该教师的综合评价意见"},null,8,["modelValue"])])])):A("",!0)]),_:1},8,["modelValue"])])}}},de=H(se,[["__scopeId","data-v-bf380d3d"]]);export{de as default};
